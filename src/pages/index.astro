---
import MainLayout from '@/layouts/MainLayout.astro';
import { SITE_CONFIG } from '@/config/site';
import ScrollColorAnimation from '@/components/ScrollColorAnimation.astro';
import AppleScrollEffects from '@/components/AppleScrollEffects.astro';
import SimpleAnnouncementBanner from '@/components/SimpleAnnouncementBanner.astro';
---

<MainLayout
  title="é¦–é¡µ"
  description={SITE_CONFIG.description}
  image="/img/admt-bg.webp"
>
  <!-- Announcement Banner - Fixed Top -->
  <SimpleAnnouncementBanner />

  <!-- Hero Section - Apple Style -->
  <section class="hero-section py-24 lg:py-40 min-h-screen flex items-center dynamic-background" data-parallax="0.3">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h1
        class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-bold text-gray-900 dark:text-white mb-8 animate-fade-in tracking-tight leading-tight"
        data-scroll-color="hero-title"
        data-fade-in
      >
        {SITE_CONFIG.name}
      </h1>
      <p
        class="text-2xl sm:text-3xl md:text-4xl text-gray-600 dark:text-gray-200 mb-8 animate-slide-up font-light leading-relaxed"
        data-scroll-color="gradient-text"
        data-fade-in
      >
        {SITE_CONFIG.tagline}
      </p>
      <p
        class="text-lg sm:text-xl md:text-2xl text-gray-600 dark:text-gray-300 mb-16 max-w-3xl mx-auto animate-slide-up leading-relaxed"
        data-scroll-color="feature-text"
      >
        {SITE_CONFIG.subtitle}
      </p>
      <div class="flex flex-col sm:flex-row gap-8 justify-center animate-slide-up">
        <a
          href="/download"
          class="bg-blue-600 hover:bg-blue-700 text-white px-12 py-5 rounded-full font-semibold text-lg sm:text-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-2xl"
        >
          ç«‹å³ä¸‹è½½
        </a>
        <a
          href="/features"
          class="text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 px-12 py-5 rounded-full font-semibold text-lg sm:text-xl transition-all duration-300 border border-blue-600 dark:border-blue-400 hover:border-blue-700 dark:hover:border-blue-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700"
        >
          äº†è§£æ›´å¤š
        </a>
      </div>
    </div>
  </section>

  <!-- Features Preview - Apple Style -->
  <section class="py-24 sm:py-32 bg-gray-50 dark:bg-black">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- ç•Œé¢ä¸»é¡µæˆªå›¾å±•ç¤º -->
      <div class="mb-20 sm:mb-28 p-4 sm:p-8 rounded-3xl bg-white dark:bg-gray-800 shadow-xl hover:shadow-2xl transition-shadow duration-500 overflow-hidden transform hover:scale-[1.01] transition-transform duration-500">
          <div class="relative w-full h-full">
            <!-- ç™½è‰²é®ç½©å±‚ -->
            <div class="absolute inset-0 bg-white/60 dark:bg-gray-900/60 z-10"></div>
            <img 
              src="/img/PageScreenshot/Main.webp" 
              alt="è®¾å¤‡ç®¡ç†å·¥å…·ä¸»ç•Œé¢" 
              class="w-full h-full object-contain p-2 sm:p-4 transition-transform duration-500 hover:scale-105 opacity-90"
            >
          </div>
          <div class="absolute inset-0 flex items-center justify-center text-center p-6">
            <div class="text-4xl sm:text-5xl md:text-6xl font-bold text-black-900 dark:text-white leading-tight">
              å¼ºå¤§ã€ç®€æ´ã€ä¼˜é›…
            </div>
          </div>
      </div>

      <div class="text-center mb-20">
        <h2
          class="text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 dark:text-white mb-6 tracking-tight"
          data-scroll-color="section-title"
        >
          å¼ºå¤§åŠŸèƒ½
        </h2>
        <p
          class="text-xl md:text-2xl text-gray-600 dark:text-gray-400 max-w-4xl mx-auto font-light"
          data-scroll-color="feature-text"
        >
          ä¸€åˆ‡éƒ½ä¸ºäº†è®©è®¾å¤‡ç®¡ç†å˜å¾—ç®€å•è€Œé«˜æ•ˆ
        </p>
      </div>
      
      <!-- Feature Grid -->
      <div class="grid grid-cols-1 md:grid-cols-1 lg:grid-cols-2 gap-12">
        {SITE_CONFIG.features.slice(0, 6).map((feature, index) => (
          <div class="flex flex-col md:flex-row items-center gap-6 sm:gap-8 p-6 sm:p-8 rounded-2xl bg-white dark:bg-gray-800 shadow-lg hover:shadow-2xl transition-all duration-400 group transform hover:-translate-y-1" data-fade-in>
            <div class="w-full md:w-1/2">
              <div class="aspect-video bg-gray-50 dark:bg-gray-700 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all duration-400">
                <!-- åŠŸèƒ½æˆªå›¾å ä½ç¬¦ -->
                <div class="w-full h-full flex items-center justify-center text-gray-400 dark:text-gray-500">
                  <span class="text-4xl sm:text-5xl">ğŸ“¸</span>
                </div>
              </div>
            </div>
            <div class="w-full md:w-1/2 text-center md:text-left">
              <div class="text-5xl sm:text-6xl mb-3 sm:mb-4 transform group-hover:scale-110 transition-transform duration-400 text-gray-700 dark:text-gray-300">
                {feature.icon}
              </div>
              <h3
                class="text-xl sm:text-2xl md:text-2xl font-semibold text-gray-900 dark:text-white mb-3 sm:mb-4"
                data-scroll-color="section-title"
              >
                {feature.title}
              </h3>
              <p
                class="text-base sm:text-lg text-gray-600 dark:text-gray-400 leading-relaxed"
                data-scroll-color="feature-text"
              >
                {feature.description}
              </p>
            </div>
          </div>
        ))}
      </div>
      
      <div class="text-center mt-12 sm:mt-16">
        <a
          href="/features"
          class="inline-flex items-center text-blue-600 dark:text-blue-400 font-medium hover:text-blue-700 dark:hover:text-blue-300 transition-all duration-300 text-base sm:text-lg px-4 py-2 rounded-full hover:bg-blue-50 dark:hover:bg-blue-900/20"
        >
          æŸ¥çœ‹æ‰€æœ‰åŠŸèƒ½
          <svg class="ml-2 w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Stats Section - Apple Style -->
  <section class="py-24 sm:py-32 bg-white dark:bg-black">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 sm:gap-12 md:gap-16 text-center">
        <div class="p-6 transform hover:scale-105 transition-transform duration-400">
          <div
            class="text-4xl sm:text-5xl md:text-6xl font-extrabold text-gray-900 dark:text-white mb-3 sm:mb-4"
            data-scroll-color="gradient-text"
            id="stats-total-usage"
          >
            ***
          </div>
          <div class="text-base sm:text-lg md:text-xl text-gray-600 dark:text-gray-400 font-medium">ç´¯è®¡ä½¿ç”¨æ¬¡æ•°</div>
        </div>
        <div class="p-6 transform hover:scale-105 transition-transform duration-400">
          <div
            class="text-4xl sm:text-5xl md:text-6xl font-extrabold text-gray-900 dark:text-white mb-3 sm:mb-4"
            data-scroll-color="gradient-text"
            id="stats-unique-devices"
          >
            ***
          </div>
          <div class="text-base sm:text-lg md:text-xl text-gray-600 dark:text-gray-400 font-medium">ä½¿ç”¨äººæ•°</div>
        </div>
        <div class="p-6 transform hover:scale-105 transition-transform duration-400">
          <div
            class="text-4xl sm:text-5xl md:text-6xl font-extrabold text-gray-900 dark:text-white mb-3 sm:mb-4"
            data-scroll-color="gradient-text"
            id="stats-total-connections"
          >
            ***
          </div>
          <div class="text-base sm:text-lg md:text-xl text-gray-600 dark:text-gray-400 font-medium">ç®¡ç†è®¾å¤‡æ¬¡æ•°</div>
        </div>
        <div class="p-6 transform hover:scale-105 transition-transform duration-400">
          <div
            class="text-4xl sm:text-5xl md:text-6xl font-extrabold text-gray-900 dark:text-white mb-3 sm:mb-4"
            data-scroll-color="gradient-text"
            id="stats-unique-connection-devices"
          >
            ***
          </div>
          <div class="text-base sm:text-lg md:text-xl text-gray-600 dark:text-gray-400 font-medium">è®¾å¤‡æ•°é‡</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Video Section -->
  <section class="py-24 sm:py-32 bg-white dark:bg-black">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12 sm:mb-16">
        <h2
          class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 dark:text-white mb-4 sm:mb-6 tracking-tight"
          data-scroll-color="section-title"
        >
          åŠŸèƒ½æ¼”ç¤ºè§†é¢‘
        </h2>
        <p
          class="text-base sm:text-lg md:text-xl text-gray-600 dark:text-gray-400 font-light max-w-3xl mx-auto"
          data-scroll-color="feature-text"
        >
          è§‚çœ‹ç©æœºç®¡å®¶çš„åŠŸèƒ½æ¼”ç¤ºï¼Œäº†è§£å¦‚ä½•é«˜æ•ˆç®¡ç†æ‚¨çš„Androidè®¾å¤‡
        </p>
      </div>
      <div class="aspect-video max-w-4xl mx-auto bg-gray-100 dark:bg-gray-800 rounded-2xl overflow-hidden shadow-2xl transition-all duration-400 hover:shadow-[0_20px_60px_rgba(0,0,0,0.3)]">
        <iframe 
          src="//player.bilibili.com/player.html?isOutside=true&aid=115400721433636&bvid=BV1mrsPzME5t&cid=33213580102&p=1" 
          scrolling="no" 
          frameborder="no"  
          allowfullscreen="true"
          class="w-full h-full"
        ></iframe>
      </div>
    </div>
  </section>

  <!-- CTA Section - Apple Style -->
  <section class="py-24 sm:py-32 bg-gray-50 dark:bg-gray-900">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2
        class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 dark:text-white mb-6 sm:mb-8 tracking-tight"
        data-scroll-color="section-title"
      >
        å‡†å¤‡å¥½å¼€å§‹ä½¿ç”¨ç©æœºç®¡å®¶äº†å—ï¼Ÿ
      </h2>
      <p
        class="text-base sm:text-lg md:text-xl text-gray-600 dark:text-gray-400 mb-10 sm:mb-12 font-light max-w-3xl mx-auto"
        data-scroll-color="feature-text"
      >
        å¼ºå¤§ã€ç®€æ´ã€ä¼˜é›…çš„å®‰å“è®¾å¤‡è·¨å¹³å°å…¨èƒ½ç©æœºç®¡å®¶
      </p>
      <div class="flex flex-col sm:flex-row gap-4 sm:gap-6 justify-center">
        <a
          href="/download"
          class="bg-blue-600 hover:bg-blue-700 text-white px-8 sm:px-12 py-3.5 rounded-full text-base sm:text-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl"
        >
          å…è´¹ä¸‹è½½ä½¿ç”¨
        </a>
        <a
          href="/docs"
          class="bg-white hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 text-gray-900 dark:text-white px-8 sm:px-12 py-3.5 rounded-full text-base sm:text-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl border border-gray-200 dark:border-gray-700"
        >
          è®¿é—®æ–‡æ¡£ä¸­å¿ƒ
        </a>
      </div>
    </div>
  </section>

  <!-- æ»šåŠ¨æ•ˆæœç»„ä»¶ -->
  <ScrollColorAnimation />
  <AppleScrollEffects />

  <!-- å®¢æˆ·ç«¯ç»Ÿè®¡æ•°æ®è·å–è„šæœ¬ -->
  <script>
    // åœ¨å®¢æˆ·ç«¯è¿è¡Œï¼Œæ¯æ¬¡é¡µé¢åŠ è½½æ—¶è·å–å®æ—¶ç»Ÿè®¡æ•°æ®
    document.addEventListener('DOMContentLoaded', async function() {
      try {
        console.log('æ­£åœ¨è·å–å®æ—¶ç»Ÿè®¡æ•°æ®...');
        const response = await fetch('https://api-g.lacs.cc/api/admt/stats', {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json',
            'Origin': 'https://admt.lacs.cc',
          },
        });
        
        console.log('ç»Ÿè®¡æ•°æ®APIå“åº”çŠ¶æ€:', response.status);
        const result = await response.json();
        console.log('ç»Ÿè®¡æ•°æ®APIå“åº”æ•°æ®:', result);
        
        if (result.success && result.data) {
          // æ›´æ–°é¡µé¢ä¸Šçš„ç»Ÿè®¡æ•°æ®ï¼Œæ·»åŠ nullæ£€æŸ¥
          const statsTotalUsage = document.getElementById('stats-total-usage');
          if (statsTotalUsage) statsTotalUsage.textContent = result.data.totalUsage + '+';
          
          const statsUniqueDevices = document.getElementById('stats-unique-devices');
          if (statsUniqueDevices) statsUniqueDevices.textContent = result.data.uniqueDevices + '+';
          
          const statsTotalConnections = document.getElementById('stats-total-connections');
          if (statsTotalConnections) statsTotalConnections.textContent = result.data.totalConnections + '+';
          
          const statsUniqueConnectionDevices = document.getElementById('stats-unique-connection-devices');
          if (statsUniqueConnectionDevices) statsUniqueConnectionDevices.textContent = result.data.uniqueConnectionDevices + '+';
          
          console.log('æˆåŠŸæ›´æ–°å®æ—¶ç»Ÿè®¡æ•°æ®');
        } else {
          console.error('è·å–ç»Ÿè®¡æ•°æ®å¤±è´¥:', result.error || 'æœªçŸ¥é”™è¯¯');
        }
      } catch (error) {
        console.error('è·å–ç»Ÿè®¡æ•°æ®æ—¶å‡ºé”™:', error);
      }
    });
  </script>
</MainLayout>

<style>
  /* Hero Section Background */
  .hero-section {
    position: relative;
    background-image: url('/img/admt-bg.webp');
    background-size: cover;
    background-position: center center;
    background-repeat: no-repeat;
    background-attachment: fixed;
  }

  /* Background overlay for better text readability */
  .hero-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.75);
    z-index: 1;
  }

  /* Dark mode overlay */
  :global(.dark) .hero-section::before {
    background: rgba(0, 0, 0, 0.7);
  }

  /* Ensure content is above the overlay */
  .hero-section > div {
    position: relative;
    z-index: 2;
  }

  /* Responsive background attachment */
  @media (max-width: 768px) {
    .hero-section {
      background-attachment: scroll;
    }
  }

  /* Enhance text contrast on background */
  .hero-section h1,
  .hero-section p {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  :global(.dark) .hero-section h1,
  :global(.dark) .hero-section p {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  }
</style>