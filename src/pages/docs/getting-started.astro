---
import DocsLayout from '@/layouts/DocsLayout.astro';
import { readFileSync } from 'fs';
import { join } from 'path';

// è¯»å–markdownæ–‡ä»¶å†…å®¹
const markdownPath = join(process.cwd(), 'public/docs/user-guide/getting-started.md');
let markdownContent = '';

try {
  markdownContent = readFileSync(markdownPath, 'utf-8');
  // ç§»é™¤markdownçš„å‰ç½®æ ‡é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨å¸ƒå±€ä¸­å·²ç»æœ‰äº†
  markdownContent = markdownContent.replace(/^# .*\n\n/, '');
} catch (error) {
  console.error('Error reading markdown file:', error);
  markdownContent = 'æ–‡æ¡£å†…å®¹åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ã€‚';
}

// ç®€å•çš„markdownåˆ°HTMLè½¬æ¢ï¼ˆåŸºç¡€ç‰ˆæœ¬ï¼‰
function markdownToHtml(markdown: string): string {
  return markdown
    // æ ‡é¢˜
    .replace(/^### (.*$)/gim, '<h3>$1</h3>')
    .replace(/^## (.*$)/gim, '<h2>$1</h2>')
    .replace(/^# (.*$)/gim, '<h1>$1</h1>')
    // ç²—ä½“
    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
    // æ–œä½“
    .replace(/\*(.*?)\*/g, '<em>$1</em>')
    // é“¾æ¥
    .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2">$1</a>')
    // ä»£ç å—
    .replace(/```([^`]+)```/g, '<pre><code>$1</code></pre>')
    // è¡Œå†…ä»£ç 
    .replace(/`([^`]+)`/g, '<code>$1</code>')
    // åˆ—è¡¨é¡¹
    .replace(/^\* (.*$)/gim, '<li>$1</li>')
    .replace(/^- (.*$)/gim, '<li>$1</li>')
    .replace(/^\d+\. (.*$)/gim, '<li>$1</li>')
    // æ®µè½
    .replace(/\n\n/g, '</p><p>')
    .replace(/^(.*)$/gim, '<p>$1</p>')
    // æ¸…ç†å¤šä½™çš„pæ ‡ç­¾
    .replace(/<p><\/p>/g, '')
    .replace(/<p>(<h[1-6]>)/g, '$1')
    .replace(/(<\/h[1-6]>)<\/p>/g, '$1')
    .replace(/<p>(<li>)/g, '<ul>$1')
    .replace(/(<\/li>)<\/p>/g, '$1</ul>')
    .replace(/<p>(<pre>)/g, '$1')
    .replace(/(<\/pre>)<\/p>/g, '$1');
}

const htmlContent = markdownToHtml(markdownContent);
---

<DocsLayout 
  title="å¿«é€Ÿå…¥é—¨æŒ‡å—" 
  description="5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹ç©æœºç®¡å®¶ï¼Œè¿æ¥æ‚¨çš„ç¬¬ä¸€å°Androidè®¾å¤‡"
  currentPath="å¿«é€Ÿå…¥é—¨"
>
  <!-- è¿›åº¦æŒ‡ç¤ºå™¨ -->
  <div class="not-prose mb-8">
    <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-700">
      <div class="flex items-center justify-between text-sm text-blue-700 dark:text-blue-300 mb-2">
        <span>å®Œæˆè¿›åº¦</span>
        <span>é¢„è®¡æ—¶é—´: 5åˆ†é’Ÿ</span>
      </div>
      <div class="w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2">
        <div class="bg-blue-600 h-2 rounded-full" style="width: 0%" id="progress-bar"></div>
      </div>
    </div>
  </div>

  <!-- å¿«é€Ÿå¯¼èˆª -->
  <div class="not-prose mb-8">
    <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">æœ¬é¡µå†…å®¹</h2>
    <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
      <ul class="space-y-2 text-sm">
        <li><a href="#step1" class="text-blue-600 dark:text-blue-400 hover:underline">ğŸ¯ ç¬¬ä¸€æ­¥ï¼šè¿æ¥è®¾å¤‡</a></li>
        <li><a href="#interface" class="text-blue-600 dark:text-blue-400 hover:underline">ğŸ–¥ï¸ ç•Œé¢æ¦‚è§ˆ</a></li>
        <li><a href="#basic-ops" class="text-blue-600 dark:text-blue-400 hover:underline">ğŸ® åŸºæœ¬æ“ä½œ</a></li>
        <li><a href="#file-transfer" class="text-blue-600 dark:text-blue-400 hover:underline">ğŸ“ æ–‡ä»¶ä¼ è¾“</a></li>
        <li><a href="#app-management" class="text-blue-600 dark:text-blue-400 hover:underline">ğŸ“± åº”ç”¨ç®¡ç†</a></li>
        <li><a href="#settings" class="text-blue-600 dark:text-blue-400 hover:underline">ğŸ”§ å¸¸ç”¨è®¾ç½®</a></li>
        <li><a href="#tips" class="text-blue-600 dark:text-blue-400 hover:underline">ğŸ¯ ä½¿ç”¨æŠ€å·§</a></li>
      </ul>
    </div>
  </div>

  <!-- ä¸»è¦å†…å®¹ -->
  <div class="prose-content">
    <Fragment set:html={htmlContent} />
  </div>

  <!-- ä¸‹ä¸€æ­¥æ¨è -->
  <div class="not-prose mt-12">
    <div class="bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl p-6 border border-green-200 dark:border-green-700">
      <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center">
        <span class="text-2xl mr-2">ğŸ‰</span>
        æ­å–œï¼æ‚¨å·²å®Œæˆå¿«é€Ÿå…¥é—¨
      </h3>
      <p class="text-gray-600 dark:text-gray-300 mb-4">
        ç°åœ¨æ‚¨å·²ç»æŒæ¡äº†åŸºæœ¬æ“ä½œï¼Œå¯ä»¥ç»§ç»­å­¦ä¹ æ›´å¤šé«˜çº§åŠŸèƒ½ï¼š
      </p>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <a href="/docs/user-guide/device-connection" class="flex items-center p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow duration-300">
          <span class="text-2xl mr-3">ğŸ”Œ</span>
          <div>
            <h4 class="font-semibold text-gray-900 dark:text-white">è®¾å¤‡è¿æ¥è¯¦è§£</h4>
            <p class="text-gray-600 dark:text-gray-300 text-sm">æ·±å…¥äº†è§£å„ç§è¿æ¥æ–¹å¼</p>
          </div>
        </a>
        <a href="/docs/user-guide/remote-control" class="flex items-center p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow duration-300">
          <span class="text-2xl mr-3">ğŸ“±</span>
          <div>
            <h4 class="font-semibold text-gray-900 dark:text-white">è¿œç¨‹æ§åˆ¶é«˜çº§åŠŸèƒ½</h4>
            <p class="text-gray-600 dark:text-gray-300 text-sm">æŒæ¡æ›´å¤šæ§åˆ¶æŠ€å·§</p>
          </div>
        </a>
        <a href="/docs/user-guide/file-management" class="flex items-center p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow duration-300">
          <span class="text-2xl mr-3">ğŸ“</span>
          <div>
            <h4 class="font-semibold text-gray-900 dark:text-white">æ–‡ä»¶ç®¡ç†å®Œæ•´æ•™ç¨‹</h4>
            <p class="text-gray-600 dark:text-gray-300 text-sm">é«˜æ•ˆç®¡ç†è®¾å¤‡æ–‡ä»¶</p>
          </div>
        </a>
        <a href="/docs/user-guide/batch-operations" class="flex items-center p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow duration-300">
          <span class="text-2xl mr-3">âš¡</span>
          <div>
            <h4 class="font-semibold text-gray-900 dark:text-white">æ‰¹é‡æ“ä½œæŒ‡å—</h4>
            <p class="text-gray-600 dark:text-gray-300 text-sm">æå‡å·¥ä½œæ•ˆç‡</p>
          </div>
        </a>
      </div>
    </div>
  </div>
</DocsLayout>

<style>
  /* è‡ªå®šä¹‰æ ·å¼ç”¨äºmarkdownå†…å®¹ */
  .prose-content h1 {
    @apply text-3xl font-bold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-4 mb-6 mt-8;
  }
  
  .prose-content h2 {
    @apply text-2xl font-semibold text-gray-900 dark:text-white mt-8 mb-4;
  }
  
  .prose-content h3 {
    @apply text-xl font-semibold text-gray-900 dark:text-white mt-6 mb-3;
  }
  
  .prose-content p {
    @apply text-gray-700 dark:text-gray-300 leading-relaxed mb-4;
  }
  
  .prose-content a {
    @apply text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 no-underline hover:underline;
  }
  
  .prose-content ul {
    @apply text-gray-700 dark:text-gray-300 mb-4 pl-6;
  }
  
  .prose-content li {
    @apply mb-2 list-disc;
  }
  
  .prose-content code {
    @apply bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 px-2 py-1 rounded text-sm;
  }
  
  .prose-content pre {
    @apply bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 p-4 rounded-lg overflow-x-auto mb-4;
  }
  
  .prose-content strong {
    @apply font-semibold text-gray-900 dark:text-white;
  }
  
  .prose-content em {
    @apply italic;
  }
</style>

<script>
  // è¿›åº¦æ¡åŠ¨ç”»
  document.addEventListener('DOMContentLoaded', () => {
    const progressBar = document.getElementById('progress-bar');
    if (progressBar) {
      // æ¨¡æ‹Ÿé˜…è¯»è¿›åº¦
      let progress = 0;
      const interval = setInterval(() => {
        progress += 2;
        progressBar.style.width = `${progress}%`;
        if (progress >= 100) {
          clearInterval(interval);
        }
      }, 100);
    }
    
    // å¹³æ»‘æ»šåŠ¨åˆ°é”šç‚¹
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });
  });
</script>
